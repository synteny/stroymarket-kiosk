# Рекламно-информационный киоск для "Василеостровского строймаркета"
Отображает схемы этажей, а также, по истечении определенного времени неактивности пользователя, видеорекламу.
Представляет из себя статическую веб-страницу, гдя вся логика реализована скриптами на клиентской стороне.

# Запуск
Поместить файлы видео в assets/video
```
./startup.sh
```
Скрипт находит все файлы .mp4 в вышеуказанной директории, записывает их перечень в файл assets/video/list.txt.
Данный файл читается скриптом веб-страницы, и используется как циклический список воспроизведения.

Затем берется шаблон файла конфигурации, assets/js/config.js.template, и копируется под именем assets/js/config.js, с автоматической подстановкой пути директории, содержащей видео.
Сгенерированный файл конфигурации непосредственно используется кодом страницы.
Таким образом, для изменения настроек необходимо редактировать именно шаблон config.js.template.

Наконец, запускается браузер chrome с ключами -allow-file-access-from-files и -kiosk, соответственно, отключающий запрет на доступ скриптов к файловой системе, а также, разворачивающий страницу на полный экран.

# Конфигурация
Как описано выше, настройки содержатся в файле assets/js/config.js.template
Для редактирования доступны следующие параметры:
* TIMEOUT: период неактивности пользователя (в секундах), по истечении которого запускается реклама
* AD_BLOCK_DURATION: суммарная продолжительность видеороликов (в секундах), по превышении которой возвращается отображение плана этажей. Показ рекламы в следующий раз продолжается со следующего ролика в списке воспроизведения.
* FADE_DURATION: длительность плавных переходов в начале и конце видеороликов (в миллисекундах)

# Форматы видео
Поддерживается видео в контейнере MP4. (Список воспроизведения составляется только из файлов, имеющих расширение .mp4, в нижнем регистре). 
Из поддерживаемых браузером кодеков, рекомендуется H.264.
Поскольку киоск имеет вертикальный экран 1080x1920, видео должно быть вертикальным, с соотношением сторон 9:16. С учетом невысокой производительности декодирования видео браузерами в Linux (отсутствие поддержки аппаратного ускорения), рекомендуется половинное разрешение, 540x960.
